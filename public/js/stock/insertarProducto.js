import{cargarDropDowns,limpiarFormulario,reestablecerImagen,previewImagen,recargarTabla}from"./helpers.js";export default a=>{$("#productos_wrapper").on("click",".nuevo",function(){$("#sku").prop("disabled",!1),$("#stock").prop("required",!0),$("#stock").off("change"),$("#stockInfoActual").addClass("d-none"),$("#stockInfoPosterior").addClass("d-none"),$("#stockActual").addClass("d-none"),limpiarFormulario(),cargarDropDowns(),reestablecerImagen(),previewImagen(),$("#formModalId").off("submit").on("submit",function(r){r.preventDefault();r=new FormData(this);$.ajax({url:""+window.location.origin+endpoints.insertarProducto,type:"POST",data:r,contentType:!1,processData:!1,success:function(r){swal(r.message,"Alta","success"),recargarTabla(a),$("#modalProducto").modal("hide")},error:function(r,a,e){r=JSON.parse(r.responseText).message;swal(r,"Error al insertar","error")}})})})};